<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Congun</title>
    <!-- CSS -->
   <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/congun.css">
		<link rel="stylesheet" href="css/form-elements-style.css">
		<link rel="stylesheet" href="css/quote-form-style.css">
		<link rel="stylesheet" href="css/magic-check.css">
		<link rel="stylesheet" href="css/profile.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
<body>
    <!-- Top content -->
	<div class="header">
		<div class="container">
			<div class="row">
				<div class="col-md-12 navigation">
					<nav class="navbar navbar-defaut navbar-top" role="navigation">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle"
								data-toggle="collapse" data-target="#navbar-collapse">
								<span class="sr-only">Toggle navigation</span> <span
									class="icon-bar"></span> <span class="icon-bar"></span> <span
									class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="#"> <img id="nav-logo"
								src="images/logo_new.png" height="75px" width="200px" />
							</a>
						</div>
						<div class="collapse navbar-collapse" id="navbar-collapse">
							<ul class="nav navbar-nav navbar-right" id="navigation-right">
								<li class="active"><a href="index.html"><span>Home</span></a></li>
								<li><a href="userprofile.html" role="button"><span
										id="user">User</span></a></li>
								<li><a href="#" role="button" class="logout"><span>Logout</span></a></li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</div>

	<div class="content-main">
		<div class="container-fluid">
		   <div class="row sub-nav-bar">
				<div class="col-md-12">
					<ul class="sub-menu">
						<li><a href="#">Dashboard</a></li>
						<li><a class="active" href="#">Profile</a></li>
						<li><a href="#">Used machines</a></li>
						<li><a href="#">Feedback</a></li>
					</ul>
				</div>
		   </div>
		  </div>
    <div class="top-content">
        <div class="container">
            
            <div class="row">
				<div class="col-md-6">
					<div class="left-container">
						<h1><strong>Congun</strong></h1>
						<div class="description">
							<p> We provide the best rentals of heavy machinary in the city. Get in touch to find out more about how we work, we promise you will not find these many options anywhere else! </p>
						</div>
					</div>
				</div>
                <div class="col-md-6 form-box">
                    <form role="form" action="" method="post" class="f1" id="supplier-quote-form">
                        <h3>Quote Form</h3>
                        <p>Give your quote for the requirement</p>
                        <div class="f1-steps">
                            
                          <fieldset>
                            <div class="form-group">
                                <label for="quantity">Number Of Equipments Available</label>
                                <input type="text" name="quantity" placeholder="Quantity" class="f1-email form-control" id="f1-email"> </div>
                             
							<div class="form-group">
							<label for="manufacturer"> Manufacturer</label>
                    			<input type="checkbox" class="magic-checkbox" name="manufacturer" id="JCB" value="JCB" /><label for="JCB"> JCB </label>
  								<input type="checkbox" class="magic-checkbox" name="manufacturer" id="Bharat" value="Bharat" /><label for="Bharat">Bharat Earth Movers </label>
								<input type="checkbox" class="magic-checkbox" name="manufacturer" id="TRF" value="TRF" /><label for="TRF">TRF </label>
								<input type="checkbox" class="magic-checkbox" name="manufacturer" id="Cat" value="Cat" /><label for="Cat">Caterpillar </label>
					 			<input type="checkbox" class="magic-checkbox" name="manufacturer" id="Komatsu" value="Komatsu " /><label for="Komatsu">Komatsu </label>
					 			<input type="checkbox" class="magic-checkbox" name="manufacturer" id="Volvo" value="Volvo " /><label for="Volvo">Volvo </label>
					 			<input type="checkbox" class="magic-checkbox" name="manufacturer" id="Hitachi" value="Hitachi " /><label for="Hitachi">Hitachi </label>
                		    </div>                                
							 <div class="machineRentalCharges">
                                <ul>
									<li><label for="machineRentalCharges">Machine Rental Charges</label>
                                <input type="text" name="machineRentalCharges" placeholder="Enter Number" class="f1-email form-control" id="f1-email"></li>
								    <li><label id="permonth" hidden>/per month</label><label id="perhour" hidden>/per hour</label><label id="perwork" hidden>/per work</label><label id="percumt" hidden>/per cu.mt</label>
								    <label>(inclusive of tax)</label></li>
								<br>
								<label style="color:grey">Tip:- select below if price mentioned above is fixed or negotiable</label>
								<br>
                    			<li><input type="radio" class="magic-radio" name="rentalChargesType" id="rentalyChargesType1" value="fixed" /><label for="rentalyChargesType1"> Fixed </label></li>
  								<li style="padding-left:30px"><input type="radio" class="magic-radio" name="rentalChargesType" id="rentalyChargesType2" value="negotiable"><label for="rentalyChargesType2">Negotiable</label></li>
								</ul>
                		    </div>                                
                            <div class="form-group">
                                <h5> Driver/Operator Available </h5><br>
								<div class="radio-driver">
								<ul>
                                <li><input type="radio" name="driverAvailable" value="Yes" class="magic-radio" id="driverNeeded-yes"><label for="driverNeeded-yes"><span class="radio-span">Yes</span></label></li>
                                <li><input type="radio" name="driverAvailable" value="No" class="magic-radio" id="driverNeeded-no" checked><label for="driverNeeded-no"><span class="radio-span"> No </span></label></li></ul></div></div>
                            
                            
                            <div class="form-group" hidden>
                                <label for="workingHoursPerMonth">Number Of Hours Working Per Month</label>
                                <input type="text" name="workingHoursPerMonth" placeholder="Enter in Hours ex: 220(45 hours per week)" class="f1-email form-control" id="noofworkinghours" value=""> </div>
                                
                             <div class="advanceCharges">
                                <label for="advance">Advance</label>
                                <ul><li><input type="text" placeholder="Enter Value" class="f1-email form-control" id="f1-value" value="0"onchange="advancecalc()"></li>
								<li><select id="relation"  class="selectbox" onchange="advancecalc()">
                                 <option value="%" selected="selected">% of Total Price</option>
                                 <option value="rupees">Rupees</option>
                                 <option value="months">no of Months</option>
								 </select></li>
								 <input type="hidden" name="advanceCharges" id="advanceCharges" value="">
								<label style="color:grey">Tip:- select below if price mentioned above is fixed or negotiable</label>
								<br>
                                <li><input type="radio" class="magic-radio" name="advanceChargesType" id="advanceChargesType1" value="fixed" /><label for="advanceChargesType1"> Fixed </label></li>
  								<li style="padding-left:30px"><input type="radio" class="magic-radio" name="advanceChargesType" id="advanceChargesType2" value="negotiable"><label for="advanceChargesType2">Negotiable</label></li>
								</ul>
								</div>
                                
                             <div class="form-group">
                                <label for="queries">Queries</label>
                                <input type="text" name="queries" placeholder="Enter for any further details" class="f1-email form-control" id="f1-email"> </div>
                                
                             <div id="hidden-fields">
                             	<input type="hidden" name="equipmentCategory" id="equipmentCategory" value="">
                                <input type="hidden" name="equipmentName" id="equipmentName" value="">
                                <input type="hidden" name="quotePostedById" id="supplierId" value="">
                                <input type="hidden" name="quotePostedByName" id="supplierName" value="">
                                <input type="hidden" name="requirementId" id="requirementId" value="">
                                <input type="hidden" name="quoteStatus" id="quoteStatus" value="open">
								<input type="hidden" name="reqtitle" id="reqtitle" value="">
								<input type="hidden" name="reqduration" id="reqduration" value="">
								<input type="hidden" name="reqlocation" id="reqlocation" value="">
								<input type="hidden" name="reqpincode" id="reqpincode" value="">
								<input type="hidden" name="mobileNumber" id="reqpincode" value="">
								
                                </div>
                                
                               <div class="f1-buttons">
                                <button type="button"  id="btn-submit" class="btn btn-next">Submit</button>
                            </div>
                                
                              
                        </fieldset>
                        
                            
                         
                        <div class="modal fade" id="modal-success-dialog" role="dialog"
						aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true">×</button>
									<h4 class="modal-title" id="myModalLabel">Success</h4>
								</div>
								<div class="modal-body">
									<div class="alert alert-success" role="alert">Quotation Submitted successfully ...</div>
								</div>
							</div>
						</div>
					</div>
                    </form>
                </div>
            </div>
        </div>
    </div>
	<div class="sub-footer">
    <div class="container-fluid">
 			<div class="row">
 				<div class="col-md-4"><p class="first"><img src="images/logo_new.png" /><br>CONGUN provides one stop online- solution for all construction equipment needs of construction Contractors, at their desired location, in specified time and at a low price.</p></div>
                <div class="col-md-4"><div class="middle"><h3>Quick Links</h3><ul><li><span class="fa fa-angle-right"></span><a href="#">FAQ</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">About Us</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">Services</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">Contact Us</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">Support</a></li>
                    </ul></div></div>
                <div class="col-md-4">

                    <div class="address-content last">
                        <h3> Address</h3>
                        <ul class="info">
                            <li><span class="fa fa-map-marker"></span> &ensp; 3rd floor T hub Gachibowli,IIIT Campus, Hyderabad, Telangana 500032</li>
                                <li><span class="fa fa-phone"></span> &ensp; +91-9989933636</li>
                                <li><span class="fa fa-envelope"></span> &ensp; <a href="mailto:info@congun.com">info@congun.com</a></li>
                        </ul>
                        <div class="social">
                            <a class="img-circle fa fa-facebook-f" href="#"></a>
                            <a class="img-circle fa fa-twitter" href="#"></a>
                            <a class="img-circle fa fa-google-plus" href="#"></a>
                            <a class="img-circle fa fa-linkedin" href="#"></a>
                        </div>
                    </div>
                </div>
 			</div>
 		</div>
    </div>
 		<div class="footer">
 			<div class="row">
 				<div class="col-md-12">
 					<div class="collapse navbar-collapse" id="navbar-collapse">
						<ul class="nav navbar-nav">
							<li class="active"><a href="#">Copyright Congun</a></li>
							<li><a href="#">Terms and Conditions</a></li>
							<li><a href="#">Privacy Policy</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#"><i class="fa fa-instagram"></i></a></li>
							<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
						</ul>
					</div>
 				</div>
 			</div>
 		</div>
    <!-- Javascript -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/requirement-scripts.js"></script>
    <script src="js/appProperties.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    	
		document.getElementById("advanceCharges").value="0:%";
    	/* to get parameters from a url */
    	var getUrlParameter = function getUrlParameter(sParam) {
    	    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
    	        sURLVariables = sPageURL.split('&'),
    	        sParameterName,
    	        i;

    	    for (i = 0; i < sURLVariables.length; i++) {
    	        sParameterName = sURLVariables[i].split('=');

    	        if (sParameterName[0] === sParam) {
    	            return sParameterName[1] === undefined ? true : sParameterName[1];
    	        }
    	    }
    	};
    	
    	var reqid = getUrlParameter('reqId');
		//reqid=7;
    	console.log('reqid',reqid);
    	var user = sessionStorage.getItem("user");
		//var user = localStorage.getItem("user");
		console.log(user);
		user = $.parseJSON(user);
		var username = user.firstname+" "+user.lastname;
			$('#user').text(username);
			$('#user-name').text(username);
    	$('#supplierId').val(user.userId);
    	$('#supplierName').val(user.firstname+" "+user.lastname);
		$('#requirementId').val(reqid);
		$('#mobileNumber').val(user.mobileNumber);
		
		var reqList = "";
		var value = "";
		var hiringChargesType = "";
		//categoryParam="EarthMoving";
		//equipment="backhoe";
		$.ajax({
			url : AppData.relativeUrl+"contractor/contractorRequirement/"+reqid,
			type : "get",
			contentType : "application/json; charset=utf-8",
			data : {},
			success : function(response) {
				response = $.parseJSON(response);
				console.log(response);
				value= response;
					reqList = "<div class='item-content'><div class='item-content-header'><h3>Requirement Details</h3><br><img src='images/"+value.equipmentCategory+"/"+value.equipmentName+".png' height='150px' width='250px' alt='image here'/></div>"
					+"<div class='item-content-header-meta'><h3>"+value.title+"</h3></div>"
					+"<div class='item-content-main'><ul><li style='padding:0px'><h5>Machine Type</h5><p>"+value.equipmentCategory+"/"+value.equipmentName+"</p></li>"
					+"<li><h5>Start date</h5><p>"+value.startDate+"</p></li>"
					+"<li><h5>End date</h5><p>"+value.endDate+"</p></li>"
					+"<li><h5>Quantity</h5><p>"+value.quantity+"</p></li><br><li style='padding:0px'><h5>Duration</h5><p>"+value.duration+" days</p></li>"
					+"<li><h5>Manufactured Year</h5><p>"+value.manufacturedyear+" Onwards</p></li>"
					+"<li><h5>hiringChargesType</h5><p>per "+value.hiringChargesType+"</p></li>"
					+"<li><h5>Transportation</h5><p>"+value.transportation+"</p></li>"
					+"<li style='padding:0px'><h5>Description</h5><p>"+value.workDescription+"</p></li><br>"
					+"<li style='padding:0px'><h5>Driver Needed</h5><p>"+value.driverNeeded+"</p></li>"
					+"<li><h5>Manufacturers</h5><p>"+value.manufacturer+"</p></li><br>"
					+"<li style='padding:0px'><h5>Diesel Charges</h5><p>"+value.dieselCharges+"</p></li>"
					+"<li><h5>workLocation</h5><p>"+value.workLocation+"</p></li>"
					+"<li><h5>Pin Code</h5><p>"+value.pincode+"</p></li><br>"
					+"<li style='padding:0px'><h5>Posted By</h5><p>"+value.contractorName+"<br>Contact: "+value.mobile+"</p></li>"
					+"</ul><div class='clear-fix'></div></div></div>";
					//reqList += '<ul><li class="dynamic-content" id='+value.quoteId+'>Category: '+value.equipmentCategory+'<span style="padding-left:194px;float:centre;">Equipment : '+value.equipmentName+'</span><span style="padding-left:100px;float:right">Quantity: '+value.quantity+'</span><br><br><span>Model: '+value.model+'</span><span style="padding-left:250px">Manufacturer: '+value.manufacturer+'</span><span style="padding-left:100px;float:right">YearOfManufacture: '+value.manufacturedyear+'</span><br><br>Created Date: '+value.createdTime+'<span style="padding-left:70px">Final Price: <b>'+value.finalQuotePrice+'</b></span><a href="#" class="btn btn-warning">View</a></li></ul>';
					$('.left-container').html("");
				    $('.left-container').append(reqList);
					$('#equipmentCategory').val(value.equipmentCategory);
				    $('#equipmentName').val(value.equipmentName);
					$('#reqtitle').val(value.title);
					$('#reqlocation').val(value.workLocation);
					$('#reqpincode').val(value.pincode);
					$('#reqduration').val(value.duration);
				hiringChargesType = value.hiringChargesType;
					
		console.log("Type : "+hiringChargesType);
    	
		if(hiringChargesType === "month"){
		$("#noofworkinghours").show();
		$("#permonth").show();
		}else if(hiringChargesType === "cu.mt"){
		$("#percumt").show();
		}else if(hiringChargesType === "hour"){
		$("#perhour").show();
		}else if(hiringChargesType === "work"){
		$("#perwork").show();
		}
			}
		});
		
		
/* This ajax call is made to populate the category and equipment machinary dropdowns */
    	
/*    	var category = []
    	$.ajax({
    		url :AppData.relativeUrl+"contractor/getDistinctCategory",
    		type:"get",
    		data:{},
    		success:function(response){
    			response = $.parseJSON(response);
    			var i = 0;
    			console.log(response);
    			$.each(response,function(index,value){
    				$("#category").append($("<option />").val(value).text(value));
    					category[i] = value;
    					i++
    			});
    			console.log("cat",categoryParam);
    			if(categoryParam !== undefined){
    			$("#category").val(categoryParam);
    			}
    			if(equipment !== undefined ){
    				$.ajax({
    					
    					url : AppData.relativeUrl+"contractor/getEquipmentByCategory/"+categoryParam,
    	    			type:"get",
    	    			data:{},
    	    			success:function(equipments){
    	    				equipments = $.parseJSON(equipments);
    	    				console.log(equipments);
    	    				$.each(equipments,function(index,value){
    	    				$("#equipment").append($("<option />").val(value).text(value));
    	    				
    	    				});
    	    				if(equipment !== undefined){
    	    				$("#equipment").val(equipment);
    	    				}
    	    			}
    	    			});
    			}else{
    			$.ajax({
    			url : AppData.relativeUrl+"contractor/getEquipmentByCategory/"+category[0],
    			type:"get",
    			data:{},
    			success:function(equipments){
    				equipments = $.parseJSON(equipments);
    				console.log(equipments);
    				$.each(equipments,function(index,value){
    				$("#equipment").append($("<option />").val(value).text(value));
    				
    				});
    			}
    			});
    			}
    		}
    	});
    	
    	/* This function will be called when there is change in the category dropdown */
    	
  /*  $("#category").on('change',function(){
    		var selectedOption = $("#category option:selected").text();
    		console.log("selected option ",selectedOption);
    		var url = AppData.relativeUrl+"contractor/getEquipmentByCategory/"+selectedOption; 
    		console.log("url ",url);
    		$.ajax({
    			url:url,
    			type:"get",
    			data:{},
    			success:function(equipments){
    				equipments = $.parseJSON(equipments);
    				console.log("equipments ",equipments);
    				$("#equipment").html("");
    				$.each(equipments,function(index,value){
    				$("#equipment").append($("<option />").val(value).text(value));
    				});	
    			}
    				
    		});
    	}); */
    	
    	
       
/* This action will be called when a contractor will submit the form  */
    	
        $("#btn-submit").click(function(){
		var success = "successfully created";
		var data = JSON.stringify($("#supplier-quote-form").serializeObject());
		console.log(data);
            
            $.ajax({
			url:AppData.relativeUrl+"supplier/submitquote",
		     type:"post",
		     contentType:"application/json; charset=utf-8",
		     data: data,
		     success:function(data){
		    	 console.log(data);
		    	 if(data === "SS01"){
		    		 console.log("inside if");
		    		 $('#modal-success-dialog').modal('show').delay(50000);
		    		 $('#modal-success-dialog').on('shown.bs.modal', function() {
		    			 $(location).attr('href',AppData.relativeUrl+"user/supplier-dashboard.html");
		    			 //history.back();	    
		    			});
		    	 }
		      }

                });
    });
	
	$(".uncheck").click(function(){
		var $label = $(this).parent("label");
		var $input = $label.prev();
		console.log($label.html())
		console.log($input.val());
		if($input.checked){
			console.log("inside if ");
		$input.prop('checked',false);
		}else{
			console.log("inside else");
		}
		$label.fadeOut('slow');
	});
	
	console.log("Values : "+document.getElementById("advanceCharges").value);

    });    
    </script>    
<script type="text/javascript">
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};
</script>

    <script type="text/javascript">
	function advancecalc(){
	console.log(document.getElementById("relation").value);
	var rel= document.getElementById("relation").value;
	console.log(document.getElementById("f1-value").value);
	var advance = document.getElementById("f1-value").value;
	document.getElementById("advanceCharges").value=advance+":"+rel;
	}
	</script>
    
    
    
    <!--[if lt IE 10]>
            <script src="assets/js/placeholder.js"></script>
        <![endif]-->
</body>

</html>