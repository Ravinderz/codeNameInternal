<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Congun</title>
    <!-- CSS -->
   <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/requirement-form-elements-style.css">
        <link rel="stylesheet" href="css/requirement-form-style.css">
        <link rel="stylesheet" href="css/home.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        </head>
<body>
    <!-- Top content -->
    <div class="top-content">
        <div class="container">
            <div class="row">
                <div class="col-sm-8 col-sm-offset-2 text">
                    <h1><strong>Congun</strong></h1>
                    <div class="description">
                        <p> We provide the best rentals of heavy machinary in the city. Get in touch to find out more about how we work, we promise you will not find these many options anywhere else! </p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 form-box">
                    <form role="form" action="" method="post" class="f1" id="contractor-req-form">
                        <h3>Requirement Form</h3>
                        <p>Fill in the form to get post your requirement</p>
                        <div class="f1-steps">
                            <div class="f1-progress">
                                <div class="f1-progress-line" data-now-value="16.66" data-number-of-steps="4" style="width: 16.66%;"></div>
                            </div>
                            <div class="f1-step active">
                                <div class="f1-step-icon"><i class="fa fa-cogs"></i></div>
                                <p>Machinary Details</p>
                            </div>
                            <div class="f1-step">
                                <div class="f1-step-icon"><i class="fa fa-calendar"></i></div>
                                <p>Time Period</p>
                            </div>
                            <div class="f1-step">
                                <div class="f1-step-icon"><i class="fa fa-puzzle-piece"></i></div>
                                <p>Misc</p>
                            </div>
                            <div class="f1-step">
                                <div class="f1-step-icon"><i class="fa fa-globe"></i></div>
                                <p>Work</p>
                            </div>
                        </div>
                        <fieldset>
                            <h4>Tell us about the machinary you are looking for..</h4>
                            <div class="form-group">
                                <label class="sr-only" for="title">Requirement Title</label>
                                <input type="text" name="title" placeholder="Requirement Title" class="f1-capacity form-control" id="f1-about-yourself"> </div>
                            <div class="form-group">
                                <label for="equipmentCategory">Category</label>
                                <select id="category" class="f1-category form-control" name="equipmentCategory">
				                </select>
                            </div>
                            <div class="form-group">
                                <label for="equipmentName">Equipment</label>
                                <select id="equipment" name="equipmentName" class="f1-equipment form-control">
                                    
				                </select>
                            </div>
                            <div class="form-group">
                                <label class="sr-only" for="specificationCapacity">Capacity</label>
                                <input type="text" name="specificationCapacity" placeholder="Capacity" class="f1-capacity form-control" id="f1-about-yourself"> </div>
                            <div class="form-group">
                                <label class="sr-only" for="specificationModel">Model</label>
                                <input type="text" name="specificationModel" placeholder="Model" class="f1-model form-control" id="f1-f1-model"> </div>
                            <div class="form-group">
                                <label for="manufacturer">Manufacturer</label><br>
                                <input type="checkbox" class="manufacturer" name="manufacturer" id="manufacturer" value="JCB" checked> JCB|
  					 <input type="checkbox" name="manufacturer" id="manufacturer" value="Bharat" checked>Bharat Earth Movers|
					 <input type="checkbox"  name="manufacturer" id="manufacturer" value="TRF" checked>TRF|
					 <input type="checkbox"  name="manufacturer" id="manufacturer" value="Cat" checked>Caterpillar|
					 <input type="checkbox"  name="manufacturer" id="manufacturer" value="Komatsu " checked>Komatsu|
					 <input type="checkbox"  name="manufacturer" id="manufacturer" value="Volvo " checked>Volvo|
					 <input type="checkbox"  name="manufacturer" id="manufacturer" value="Hitachi " checked>Hitachi|

                             </div>
                            <div class="f1-buttons">
                                <button type="button" class="btn btn-next">Next</button>
                            </div>
                        </fieldset>
                        <fieldset>
                            <h4>tell us Quantity and duration of machinary needed</h4>
                            <div class="form-group">
                                <label class="sr-only" for="quantity">Quantity</label>
                                <input type="text" name="quantity" placeholder="Quantity" class="f1-email form-control" id="f1-email"> </div>
                            <div class="form-group">
                                <label class="sr-only" for="duration">Duration</label>
                                <input type="text" name="duration" placeholder="Duration" class="f1-email form-control" id="f1-email"> </div>
                            <div class="form-group">
                                <label class="sr-only" for="startDate">Start Date</label>
                                <input type="date" name="startDate" placeholder="Start Date" class="f1-email form-control" id="f1-email"> </div>
                            <div class="form-group">
                                <label class="sr-only" for="equipmentManufactureYear">Year of Manufacture</label>
                                <input type="text" name="equipmentManufactureYear" placeholder="Year of Manufacture" class="f1-email form-control" id="f1-email"> </div>
                            <div class="f1-buttons">
                                <button type="button" class="btn btn-previous">Previous</button>
                                <button type="button" class="btn btn-next">Next</button>
                            </div>
                        </fieldset>
                        <fieldset>
                            <h4>Misc</h4>
                            <div class="form-group">
                                <div class="form-radio-multiple">
                                    <label for="hiringChargersType"> Hiring Charges Type </label>
                                    <br>
                                    <input type="radio" name="hiringChargersType" value="hour" id="hiringChargersType"> Hourly
                                    <br>
                                    <input type="radio" name="hiringChargersType" value="day" id="hiringChargersType"> Daily
                                    <br>
                                    <input type="radio" name="hiringChargersType" value="week" id="hiringChargersType"> Weekly
                                    <br>
                                    <input type="radio" name="hiringChargersType" value="month" id="hiringChargersType"> Monthly </div>
                            </div>
                            <div class="form-radio-right">
                                <div class="form-group">
                                    <label for="transportation"> Transportation </label><br>
                                    <input type="radio" name="transportation" value="to" id="transportation"> TO
                                    <input type="radio" name="transportation" value="tofro" id="transportation"> To&Fro </div>
                                <div class="form-group">
                                    <label for="driverNeeded"> Driver Needed </label><br>
                                    <input type="radio" name="driverNeeded" value="yes" id="driverNeeded"> Yes
                                    <input type="radio" name="driverNeeded" value="no" id="driverNeeded" checked> No </div>
                            </div>
                            <div class="clear"></div>
                            <div class="form-radio-left">
                                <div class="form-group">
                                    <label for="helperNeeded"> Helper Needed </label><br>
                                    <input type="radio" name="helperNeeded" value="yes" id="helperNeeded"> Yes
                                    <input type="radio" name="helperNeeded" value="no" id="helperNeeded" checked> No </div>
                            </div>
                            <div class="form-radio">
                                <div class="form-group">
                                    <label for="dieselChargers"> Diesel Charges </label><br>
                                    <input type="radio" name="dieselCharges" value="yes" id="dieselChargers"> Yes
                                    <input type="radio" name="dieselCharges" value="no" id="dieselChargers" checked> No </div>
                            </div>
                            <div class="clear"></div>
                            <div class="f1-buttons">
                                <button type="button" class="btn btn-previous">Previous</button>
                                <button type="button" class="btn btn-next">Next</button>
                            </div>
                        </fieldset>
                        <fieldset>
                            <h4>Tell us about you work location</h4>
                            <div class="form-group">
                                <label class="sr-only" for="workLocation">Work Location</label>
                                <input type="text" name="workLocation" placeholder="Work Location" class="f1-facebook form-control" id="f1-facebook"> </div>
                            <div class="form-group">
                                <label class="sr-only" for="workDescription">Work Description</label>
                                <input type="text" name="workDescription" placeholder="Work Description" class="f1-twitter form-control" id="f1-twitter"> </div>
                            <div class="form-group">
                                <label class="sr-only" for="workAreaImages">Work Area Images</label>
                                <input type="text" name="workAreaImages" placeholder="Work Area Images" class="f1-google-plus form-control" id="f1-google-plus"> </div>
                                <div id="hidden-fields">
                                <input type="hidden" name="contractorId" id="contractorId" value="">
                                <input type="hidden" name="contractorName" id="contractorName" value="">
                                </div>
                            <div class="f1-buttons">
                                <button type="button" class="btn btn-previous">Previous</button>
                                <button type="button" id="btn-submit" class="btn btn-submit">Submit</button>
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Javascript -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.backstretch.min.js"></script>
    <script src="js/retina-1.1.0.min.js"></script>
    <script src="js/requirement-scripts.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
       
    	var contractor_details = sessionStorage.getItem("user");
    	contractor_details = $.parseJSON(contractor_details);
    	$('#contractorId').val(contractor_details.userId);
    	$('#contractorName').val(contractor_details.firstname+" "+contractor_details.lastname);
    	
    	
    	/* This ajax call is made to populate the category and equipment machinary dropdowns */
    	
    	var category = []
    	$.ajax({
    		url :"contractor/getDistinctCategory",
    		type:"get",
    		data:{},
    		success:function(response){
    			response = $.parseJSON(response);
    			var i = 0;
    			
    			$.each(response,function(index,value){
    				$("#category").append($("<option />").val(value).text(value));
    					category[i] = value;
    					i++
    			});
    			$.ajax({
    				url : "contractor/getEquipmentByCategory/"+category[0],
    			type:"get",
    			data:{},
    			success:function(equipments){
    				equipments = $.parseJSON(equipments);
    				$.each(equipments,function(index,value){
    				$("#equipment").append($("<option />").val(value).text(value));
    				
    				});
    			}
    			});
    		}
    	});
    	
    	/* This function will be called when there is change in the category dropdown */
    	
    	$("#category").on('change',function(){
    		var selectedOption = $("#category option:selected").text();
    		console.log("selected option ",selectedOption);
    		var url = "contractor/getEquipmentByCategory/"+selectedOption; 
    		console.log("url ",url);
    		$.ajax({
    			url:url,
    			type:"get",
    			data:{},
    			success:function(equipments){
    				equipments = $.parseJSON(equipments);
    				console.log("equipments ",equipments);
    				$("#equipment").html("");
    				$.each(equipments,function(index,value){
    				$("#equipment").append($("<option />").val(value).text(value));
    				});	
    			}
    				
    		});
    	});
    	
    	
    	
    	
    	/* This action will be called when a contractor will submit the form  */
    	
        $("#btn-submit").click(function(){
		var success = "successfully created";
		var data = JSON.stringify($("#contractor-req-form").serializeObject());
		console.log(data);
            
            $.ajax({
			url:"contractor/contractorRequirement",
		     type:"post",
		     contentType:"application/json; charset=utf-8",
		     data: data,
		     success:function(data){
		    	 console.log(data);
		      }

                });
    });
    	
    	
    	
    });    
    </script>    
<script type="text/javascript">
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    console.log(a);
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};
</script>

    
    
    
    
    <!--[if lt IE 10]>
            <script src="assets/js/placeholder.js"></script>
        <![endif]-->
</body>

</html>