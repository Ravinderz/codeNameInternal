<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ConGun</title>
<meta name="description" content="Heavy Machinery Rentals">
<meta name="author" content="Congun">

<!-- <link rel="stylesheet"
	href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500"> -->
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="stylesheet" href="../css/font-awesome.min.css">
<!--<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />-->
<link rel="stylesheet" href="../css/congun.css">
<link rel="stylesheet" href="../css/dashboard.css">
<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/appProperties.js"></script>
<!--<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> -->
</head>
<body>
	
	<div class="header">
		<div class="container">
			<div class="row">
				<div class="col-md-12 navigation">
					<nav class="navbar navbar-defaut navbar-top" role="navigation">
						<div class="navbar-header">
							<button type="button" class="navbar-toggle"
								data-toggle="collapse" data-target="#navbar-collapse">
								<span class="sr-only">Toggle navigation</span> <span
									class="icon-bar"></span> <span class="icon-bar"></span> <span
									class="icon-bar"></span>
							</button>
							<a class="navbar-brand" href="#"> <img id="nav-logo"
								src="..\images\logo_new.png" height="75px" width="200px" />
							</a>
						</div>
						<div class="collapse navbar-collapse" id="navbar-collapse">
							<ul class="nav navbar-nav navbar-right" id="navigation-right">
								<li class="active"><a href="index.html"><span>Home</span></a></li>
								<li><a href="supplier-profile.html" role="button"><span
										id="user">User</span></a></li>
								<li><a href="#" role="button" class="logout"><span>Logout</span></a></li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</div>

	<div class="content-main">
			<div class="container-fluid">
		   <div class="row sub-nav-bar">
				<div class="col-md-6">
					<ul class="sub-menu">
						<li><a href="supplier-dashboard.html">Dashboard</a></li>
						<li><a class="active" href="supplier-profile.html">Profile</a></li>
						<li><a href="#">Used machines</a></li>
						<li><a href="#">Feedback</a></li>
					</ul>
					</div>
				<div class="col-md-6">	
					<div class="search-bar-2">
					<form>
						 <div class="input-group">
      						<input type="text" id="search-input" class="form-control" placeholder="Search for...">
      						<span class="input-group-btn">
        					<button class="btn btn-default" type="button" id="search-btn"><i class="fa fa-search"></i></button>
      						</span>
    					</div>
					</form>
					</div>
				</div>
		   </div>
		  </div>
		  <div class="container">
			<div class="row">
				<div class="col-md-12">
		   <div class="panel panel-default my-req">
			  <div class="panel-heading">My Quotes</div>
			  <div class="quote-table">
				 <table class="table table-striped">
					  <thead>
						<tr>
						  <th>Date</th>
						  <th>Requirement</th>
						  <th>Quantity</th>
						  <th>Company/Individual</th>
						  <th>Duration</th>
						  <th>Status</th>
						  <th>Location</th>
						</tr>
					  </thead>
					  <tbody>
						<tr>
						  <td>22-Aug-16</td>
						  <td>Work at kukatpally<a href="#">(view)</a></td>
						  <td>2</td>
						  <td>Client1</td>
						  <td>2 months</td>
						  <td>Open</td>
						  <td>Hyderabad</td>
						</tr>
						<tr>
						  <td>22-Aug-16</td>
						  <td>Work at locality<a href="#">(view)</a></td>
						  <td>4</td>
						  <td>Client2</td>
						  <td>5 months</td>
						  <td>Open</td>
						  <td>Gujarat</td>
						</tr>
						<tr>
						  <td>22-Aug-16</td>
						  <td>Work at kukatpally<a href="#">(view)</a></td>
						  <td>1</td>
						  <td>Client3</td>
						  <td>7 days </td>
						  <td>Open</td>
						  <td>Karnataka</td>
						</tr>
					  </tbody>
				</table>
				</div>
		</div>
		<div class="req-pagination">
			<nav aria-label="Page navigation">
				<ul class="pagination ">
					<li>
					  <a href="#" aria-label="Previous">
						<span aria-hidden="true">&laquo;</span>
					  </a>
					</li>
					<li><a href="#">1</a></li>
					<li><a href="#">2</a></li>
					<li><a href="#">3</a></li>
					<li>
						<a href="#" aria-label="Next">
							<span aria-hidden="true">&raquo;</span>
						</a>
					</li>
				</ul>
			</nav>
		</div>	
				</div>
			</div>
				
	</div>
	<div class="requirement-wrapper">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h4>Mapped Requirements</h4>
					<div class="requirement-card-wrapper">
					<div class="media">
						<div class="media-left">
							<h4 class="media-heading">requirement 1</h4>
							<a href="#">
							  <img class="media-object" src="http://placehold.it/130x130" alt="...">
							</a>
						</div>
						  <div class="media-body">
						  	<div class="client-name"><h3>client 1</h3></div>
							<div class="applied-date"><span>Applied on : 17th july,2016</span></div>
							<h4 id="equipment-heading">equipment details</h4>	
								<table class="table">
									 <thead>
										<tr>
										  <th>Category</th>
										  <th>Equipment</th>
										  <th>Manufacturer</th>
										  <th>Year of Manufacture</th>
										  <th>Duration</th>
										  <th>Location</th>
										</tr>
									 </thead>
									 <tbody>
										<tr>
										  <td>EarthMoving</td>
										  <td>Dozer</td>
										  <td>JCB</td>
										  <td>2015</td>
										  <td>1 month</td>
										  <td>Hyderabad</td>
										</tr>
									</tbody>	
								</table>
						  </div>
					</div><!-- end of media -->
					<div class="media">
						<div class="media-left">
							<h4 class="media-heading">requirement 2</h4>
							<a href="#">
							  <img class="media-object" src="http://placehold.it/130x130" alt="...">
							</a>
						</div>
						  <div class="media-body">
						  	<div class="client-name"><h3>client 1</h3></div>
							<div class="applied-date"><span>Applied on : 17th july,2016</span></div>
							<h4 id="equipment-heading">equipment details</h4>	
								<table class="table">
									 <thead>
										<tr>
										  <th>Category</th>
										  <th>Equipment</th>
										  <th>Manufacturer</th>
										  <th>Year of Manufacture</th>
										  <th>Duration</th>
										  <th>Location</th>
										</tr>
									 </thead>
									 <tbody>
										<tr>
										  <td>EarthMoving</td>
										  <td>Dozer</td>
										  <td>JCB</td>
										  <td>2015</td>
										  <td>1 month</td>
										  <td>Hyderabad</td>
										</tr>
									</tbody>	
								</table>
						  </div>
					</div><!-- end of media -->
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
    <div class="sub-footer">
    <div class="container-fluid">
 			<div class="row">
 				<div class="col-md-4"><p class="first"><img src="../images/logo_new.png" /><br>CONGUN provides one stop online- solution for all construction equipment needs of construction Contractors, at their desired location, in specified time and at a low price.</p></div>
                <div class="col-md-4"><div class="middle"><h3>Quick Links</h3><ul><li><span class="fa fa-angle-right"></span><a href="#">FAQ</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">About Us</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">Services</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">Contact Us</a></li>
                    <li><span class="fa fa-angle-right"></span><a href="#">Support</a></li>
                    </ul></div></div>
                <div class="col-md-4">
                    
                    <div class="address-content last">
                        <h3> Address</h3>
                        <ul class="info">
                            <li><span class="fa fa-map-marker"></span> &ensp; 3rd floor T hub Gachibowli,IIIT Campus, Hyderabad, Telangana 500032</li>
                                <li><span class="fa fa-phone"></span> &ensp; +91-9989933636</li>
                                <li><span class="fa fa-envelope"></span> &ensp; <a href="mailto:info@congun.com">info@congun.com</a></li>
                        </ul>
                        <div class="social">
                            <a class="img-circle fa fa-facebook-f" href="#"></a>
                            <a class="img-circle fa fa-twitter" href="#"></a>
                            <a class="img-circle fa fa-google-plus" href="#"></a>
                            <a class="img-circle fa fa-linkedin" href="#"></a>
                        </div>
                    </div>
                </div>
 			</div>
 		</div>
    </div>
 		<div class="footer">
 			<div class="row">
 				<div class="col-md-12">
 					<div class="collapse navbar-collapse" id="navbar-collapse">
						<ul class="nav navbar-nav">
							<li class="active"><a href="#">Copyright Congun</a></li>
							<li><a href="#">Terms and Conditions</a></li>	
							<li><a href="#">Privacy Policy</a></li>	
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#"><i class="fa fa-facebook"></i></a></li>
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="#"><i class="fa fa-instagram"></i></a></li>
							<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
						</ul>
					</div>
 				</div>
 			</div>
 		</div>
 		<script type="text/javascript">
 			$(document).ready(function(){
 				var requirements = [];
 				var quotes = [];
 				var user = sessionStorage.getItem("user");
 				user = $.parseJSON(user);
 				console.log(user);
 				var username = user.firstname+" "+user.lastname;
 				$('#user').text(username);
 				
 				$('.logout').click(function() {
					console.log("inside logout function")
					var user = sessionStorage.getItem("user");
					if (user !== null) {
						sessionStorage.removeItem("user");
					}
					console.log("user logged out");
					$(location).attr('href', "../index.html");
				});
 				
 				var flag = false;
 				var quoteList = "";
 				$.ajax({
 					url:AppData.relativeUrl+"supplier/getquotesbysupplier/"+user.userId,
 					/*+user.userId,*/
 					type:"get",
 					data:{},
 					success:function(response){
 						response = $.parseJSON(response);
 						console.log(response.length);
 						console.log(response);
 						if(response.length === 0){
 							$('.quote-table').html("");
 							var noData = '<div class="no-data"><p><span class="above">No Quotes posted by you ,..</span><br><span class="below">Quote a mapped requirement to see you quotes in this section</span></p></div>';
 							$('.quote-table').append(noData);
 						}else{
 						var tableHeader = '<table class="table table-striped"><thead><tr><th>Date</th><th>Requirement</th><th>Quantity</th><th>Company/Individual</th><th>Duration</th><th>Status</th><th>Location</th></tr></thead><tbody>';
 						var tableEndTags = '</tbody></table>';
 						$.each(response,function(index,value){
 							quotes[value.quoteId] = value;
 							var createdTime = value.createdTime;
 							createdTime = $.date(createdTime);
 							console.log("created time :: ",$.date(createdTime));
 							quoteList += '<tr><td>'+createdTime+'</td><td>'+value.title+'<a href="#">(view)</a></td><td>'+value.quantity+'</td><td>'+value.quotePostedByName+'</td><td>1 Month</td><td>'+value.quoteStatus+'</td><td>Hyderabad</td></tr>';
 						});
 						var tableContent = tableHeader+quoteList+tableEndTags;
 						$('.quote-table').html("");
 						$('.quote-table').append(tableContent);
 					}
 					}
 					});
				
 				var reqList = "";
 				$.ajax({
 					url:AppData.relativeUrl+"contractor/getmappedrequirements/"+user.userId,
 					/*+user.userId,*/
 					type:"get",
 					data:{},
 					success:function(response){
 						response = $.parseJSON(response);
 						console.log(response);
 						$.each(response,function(index,value){
 							requirements[value.requirementId] = value;	
 							var createdTime = value.createdTime;
 							createdTime = $.date(createdTime);
 							reqList += '<div class="media"><div class="media-left"><h4 class="media-heading">'+value.title+'</h4><a href="#">'
 							+'<img class="media-object" src="http://placehold.it/130x130" alt="..."></a></div><div class="media-body">'
 							+'<div class="client-name"><h3>'+value.contractorName+'</h3></div><div class="give-quote"><button type="button" class="btn btn-primary">Give Quote</button></div><div class="clear-fix"></div><div class="applied-date"><span>Applied on : '+createdTime+'</span></div>'
 							+'<h4 id="equipment-heading">equipment details</h4><table class="table table-condensed"><thead><tr><th>Category</th><th>Equipment</th><th>Manufacturer</th>'
 							+'<th>Year of Manufacture</th><th>Duration</th><th>Location</th></tr></thead><tbody><tr><td>'+value.equipmentCategory+'</td><td>'+value.equipmentName+'</td>'
 							+'<td>'+value.manufacturer+'</td><td>'+value.equipmentManufactureYear+'</td><td>'+value.duration+' month</td><td>Hyderabad</td></tr></tbody></table></div></div>';
 						});
 						$('.requirement-card-wrapper').html("");
 						$('.requirement-card-wrapper').append(reqList);
 					}
 					});
 				
 			});
 		</script>
 		<script type="text/javascript">
 		$.date = function(dateObject) {
 		    var d = new Date(dateObject);
 		    var date = d.toDateString();
 		    var dateArr = date.split(" ");
 		    date = dateArr[2]+ "-" + dateArr[1] + "-" + dateArr[3];
 		    return date;
 		};
 		</script>		
 				
    </body>
</html>